--- vmware-workstation.py.orig	2010-02-04 18:50:30.000000000 +0000
+++ vmware-workstation.py	2010-02-25 18:25:37.000000000 +0000
@@ -4,11 +4,12 @@
 VMware Workstation component installer.
 """
 DEST = LIBDIR/'vmware'
-conf = DEST/'setup/vmware-config'
+import os
+conf = path(os.environ['WORKDIR'])/'vmware-config.sh'
 
-LIMITSFILE = Destination('/etc/security/limits.conf')
+LIMITSFILE = SYSCONFDIR/'security/limits.conf'
 NOFILE_MINIMUM = 4096
-PAMLOGINFILE = Destination('/etc/pam.d/login')
+PAMLOGINFILE = SYSCONFDIR/'pam.d/login'
 
 vmwareSentinel = '# Automatically generated by the VMware Installer - DO NOT REMOVE\n'
 pamLoginLine = 'session    required   pam_limits.so\n'
@@ -109,7 +110,7 @@
       self.SetPermission(DEST/'bin/*', BINARY)
 
       eclipse = self.GetAnswer('eclipse')
-      eclipse and self.AddTarget('Link', DEST/'eclipse-ivd/com.vmware.bfg_1.0.0',
+      False and self.AddTarget('Link', DEST/'eclipse-ivd/com.vmware.bfg_1.0.0',
                                  Destination(eclipse)/'plugins/com.vmware.bfg_1.0.0')
 
    def _killVMwareProcesses(self):
@@ -179,13 +180,13 @@
       # Player is still installed though, so we want to be
       # sure to restart the services for Player.
       script = INITSCRIPTDIR/'vmware'
-      if script.exists():
+      if False:
          self.RunCommand(script, 'stop', ignoreErrors=True)
          self.RunCommand(script, 'start')
 
    def _ClearVMwareEclipseINI(self):
       eclipse = self.GetAnswer('eclipse')
-      if eclipse:
+      if False:
          try:
             # Check if our section already exists at the beginning
             # of the file.  If it does clear it.
@@ -202,7 +203,7 @@
    def _ModifyEclipseINI(self):
       eclipse = self.GetAnswer('eclipse')
       log.Debug('ModifyINI: Eclipse is: %s', eclipse)
-      if eclipse:
+      if False:
          log.Debug('ModifyINI: Eclipse path was found at %s', eclipse)
          # Modify the eclipse.ini file to include the lines:
          # -vm
@@ -234,7 +235,7 @@
       missingFeatures = []
       pluginDir = DEST/'eclipse-ng'
       xmlfile = pluginDir/'feature.xml'
-      if xmlfile.exists():
+      if False:
          text = xmlfile.bytes()
          req = str(re.findall('<requires>.*</requires>', text, re.DOTALL))
          reqPlugins = re.findall('import plugin="(.*?)"', str(req), re.DOTALL)
@@ -284,7 +285,7 @@
       eclipse = self.GetAnswer('eclipse')
       eclipseCCPP = self.GetAnswer('eclipseCCPP')
       log.Debug('Eclipse(C/C++): Eclipse is: %s', eclipse)
-      if eclipse and eclipseCCPP.lower() == 'yes':
+      if False and eclipseCCPP.lower() == 'yes':
          success=False
          pluginPath = DEST/'eclipse-ng'
          configFile = pluginPath/'vmware-eclipse-update-site.config'
@@ -459,7 +460,7 @@
       # to check.
       nofileHL = self.GetAnswer('nofileHardLimit')
       if nofileHL and (self.hardLimit != int(nofileHL)):
-         limitsFile = Destination('/etc/security/limits.conf')
+         limitsFile = LIMITSFILE
          if limitsFile.exists():
             self._ClearVMwareLimitsConf(limitsFile, restoreEntry=False)
             log.Debug('Modifying /etc/security/limits.conf hard limit from '
