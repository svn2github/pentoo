# Copyright 1999-2013 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Header: $

EAPI=5

inherit versionator

AVC=( $(get_version_components) )
MY_PV_YYYY=${AVC[0]}
MY_PV_MM=${AVC[1]}

DESCRIPTION="Archive of packetstorm exploits"
HOMEPAGE="http://packetstorm.wowhacker.com/"
IUSE="1999 2000 2001 2002 2003 2004 2005 2006 2007 2008 +2009 +2010
+2011 +2012 +2013"
SRC_URI="1999? ( http://packetstorm.wowhacker.com/9912-exploits/1999-exploits.tgz )
	2000? ( http://packetstorm.wowhacker.com/0012-exploits/2000-exploits.tgz )
	2001? ( http://packetstorm.wowhacker.com/0112-exploits/2001-exploits.tgz )
	2002? ( http://packetstorm.wowhacker.com/0212-exploits/2002-exploits.tgz )
	2003? ( http://packetstorm.wowhacker.com/0312-exploits/2003-exploits.tgz )
	2004? ( http://packetstorm.wowhacker.com/0412-exploits/2004-exploits.tgz )
	2005? ( http://packetstorm.wowhacker.com/0512-exploits/2005-exploits.tgz )
	2006? ( http://packetstorm.wowhacker.com/0612-exploits/2006-exploits.tgz )
	2007? ( http://packetstorm.wowhacker.com/0712-exploits/2007-exploits.tgz )
	2008? ( http://packetstorm.wowhacker.com/0812-exploits/2008-exploits.tgz )
	2009? ( http://packetstorm.wowhacker.com/0912-exploits/2009-exploits.tgz )
	2010? ( http://packetstorm.wowhacker.com/1012-exploits/2010-exploits.tgz )
	2011? ( http://packetstorm.wowhacker.com/1112-exploits/2011-exploits.tgz )
	2012? ( http://packetstorm.wowhacker.com/1212-exploits/2012-exploits.tgz )"

	# a little hack for easier bump
	SRC_URI="${SRC_URI} 2013? ("
		for MY_M in $(eval echo "{1..$MY_PV_MM}"); do
			SRC_URI="${SRC_URI}  http://packetstorm.wowhacker.com/13${MY_M}-exploits/13${MY_M}-exploits.tgz"
		done
	SRC_URI="${SRC_URI} )"

LICENSE="as-is"
SLOT="0"
KEYWORDS="amd64 x86 arm"

DEPEND=""
RDEPEND=""

S="${WORKDIR}"

QA_PREBUILT="/usr/share/exploits/packetstormexploits/0001-exploits/bnc246
		/usr/share/exploits/packetstormexploits/0212-exploits/kadmin
		/usr/share/exploits/packetstormexploits/9902-exploits/SDI-lsof
		/usr/share/exploits/packetstormexploits/0204-exploits/7350fun"

src_install() {
	insinto /usr/share/exploits/$PN
	doins -r * || die "install failed"
}
